(this.webpackJsonpsmusic=this.webpackJsonpsmusic||[]).push([[0],{51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(2),c=n.n(a),i=n(22),s=n.n(i),o=n(5),u=n.n(o),l=n(7),j=n(3),d=n(9),b=n(23),f=n.n(b),g=n(8),O=n(6),m=function(t){var e=t.audioRef,n=t.setSongInfo,c=t.songInfo,i=t.currentSong,s=t.isPlaying,o=t.setIsPlaying,d=t.setCurrentSong,b=t.songs,f=t.setSongs;Object(a.useEffect)((function(){var t=b.map((function(t){return t.id===i.id?Object(j.a)(Object(j.a)({},t),{},{active:!0}):Object(j.a)(Object(j.a)({},t),{},{active:!1})}));f(t)}),[i]);var m=function(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)},h=function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=b.findIndex((function(t){return t.id===i.id})),"skip-forward"!==n){t.next=4;break}return t.next=4,d(b[(r+1)%b.length]);case 4:if("skip-back"!==n){t.next=12;break}if((r-1)%b.length!==-1){t.next=10;break}return t.next=8,d(b[b.length-1]);case 8:return s&&e.current.play(),t.abrupt("return");case 10:return t.next=12,d(b[(r-1)%b.length]);case 12:s&&e.current.play();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p={transform:"translateX(".concat(c.animationPercentage,"%")};return Object(r.jsxs)("div",{className:"player",children:[Object(r.jsxs)("div",{className:"time-control",children:[Object(r.jsx)("p",{children:m(c.currentTime)}),Object(r.jsxs)("div",{className:"track",children:[Object(r.jsx)("input",{min:0,max:c.duration||0,value:c.currentTime,onChange:function(t){e.current.currentTime=t.target.value,n(Object(j.a)(Object(j.a)({},c),{},{currentTime:t.target.value}))},type:"range"}),Object(r.jsx)("div",{style:p,className:"animate-track"})]}),Object(r.jsx)("p",{children:c.duration?m(c.duration):"0:00"})]}),Object(r.jsxs)("div",{className:"play-control",children:[Object(r.jsx)(g.a,{onClick:function(){return h("skip-back")},className:"skip-back",icon:O.d,size:"2x"}),Object(r.jsx)(g.a,{onClick:function(){s?(e.current.pause(),o(!s)):(e.current.play(),o(!s))},className:"play",size:"2x",icon:s?O.b:O.c}),Object(r.jsx)(g.a,{onClick:function(){return h("skip-forward")},className:"skip-forward",size:"2x",icon:O.e})]})]})},h=function(t){var e=t.currentSong;return Object(r.jsxs)("div",{className:"song-container",children:[Object(r.jsx)("img",{src:e.imageUrl,alt:e.name}),Object(r.jsx)("h2",{children:e.name}),Object(r.jsx)("h3",{children:e.artist})]})},p=(n(51),function(t){var e=t.song,n=t.audioRef,a=t.isPlaying,c=t.songs,i=t.setCurrentSong,s=t.id,o=t.setSongs,d=function(){var t=Object(l.a)(u.a.mark((function t(){var e,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.filter((function(t){return t.id===s})),t.next=3,i(e[0]);case 3:r=c.map((function(t){return t.id===s?Object(j.a)(Object(j.a)({},t),{},{active:!0}):Object(j.a)(Object(j.a)({},t),{},{active:!1})})),o(r),a&&n.current.play();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{onClick:d,className:"library-song ".concat(e.active?"selected":""),children:[Object(r.jsx)("img",{src:e.imageUrl,alt:e.name}),Object(r.jsxs)("div",{className:"song-description",children:[Object(r.jsx)("h3",{children:e.name}),Object(r.jsx)("h4",{children:e.year}),Object(r.jsx)("h4",{children:e.artist})]})]})}),x=function(t){var e=t.songs,n=t.audioRef,a=t.isPlaying,c=t.setCurrentSong,i=t.setSongs,s=t.libraryStatus;return Object(r.jsxs)("div",{className:"library ".concat(s?"active-library":""),children:[Object(r.jsx)("h2",{className:"playlist-title",children:"Playlist"}),Object(r.jsx)("div",{className:"library-songs",children:e.map((function(t){return Object(r.jsx)(p,{song:t,setCurrentSong:c,songs:e,id:t.id,audioRef:n,isPlaying:a,setSongs:i},t.id)}))})]})},v=function(t){var e=t.setLibraryStatus,n=t.libraryStatus;return Object(r.jsxs)("nav",{children:[Object(r.jsx)("h1",{children:" IX. "}),Object(r.jsx)("button",{onClick:function(){return e(!n)},children:Object(r.jsx)(g.a,{icon:O.a})})]})};var y=function(){var t=Object(a.useRef)(null),e=Object(a.useState)([{id:"5ff13d6646d3a91ea12fac61",name:"Africa",imageUrl:"https://is3-ssl.mzstatic.com/image/thumb/Music123/v4/92/fd/d1/92fdd10b-9cbd-5032-0908-7d72a381884d/074643772822.jpg/1000x1000bb.webp",artist:"Toto",audio:"https://il.ilill.li/mp3/Toto_Africa.mp3?t=dropbox",year:1982,active:!0}]),n=Object(d.a)(e,2),c=n[0],i=n[1],s=Object(a.useState)(c[0]),o=Object(d.a)(s,2),b=o[0],g=o[1],O=Object(a.useState)(!1),p=Object(d.a)(O,2),y=p[0],S=p[1],k=Object(a.useState)({currentTime:0,duration:0,animationPercentage:0}),C=Object(d.a)(k,2),N=C[0],P=C[1],_=Object(a.useState)(!1),w=Object(d.a)(_,2),T=w[0],I=w[1],M=function(t){var e=t.target.currentTime,n=t.target.duration,r=Math.round(e),a=Math.round(n),c=Math.round(r/a*100);P(Object(j.a)(Object(j.a)({},N),{},{currentTime:e,duration:n,animationPercentage:c}))},R=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.findIndex((function(t){return t.id===b.id})),e.next=3,g(c[(n+1)%c.length]);case 3:y&&t.current.play();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f.a.get("http://localhost:8080/items/tracks").then((function(t){return i(t.data.tracks)}))}),[]),Object(r.jsxs)("div",{className:"App ".concat(T?"library-active":""),children:[Object(r.jsx)(v,{libraryStatus:T,setLibraryStatus:I}),Object(r.jsx)(h,{currentSong:b}),Object(r.jsx)(m,{setSongInfo:P,songInfo:N,audioRef:t,setIsPlaying:S,currentSong:b,isPlaying:y,songs:c,setCurrentSong:g,setSongs:i}),Object(r.jsx)(x,{audioRef:t,songs:c,setCurrentSong:g,isPlaying:y,setSongs:i,libraryStatus:T}),";",Object(r.jsx)("audio",{onLoadedMetadata:M,onTimeUpdate:M,ref:t,src:b.audio,onEnded:R})]})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),S()}},[[52,1,2]]]);
//# sourceMappingURL=main.bcceaffd.chunk.js.map